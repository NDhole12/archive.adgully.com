; Archive.adgully.com Custom PHP Configuration
; Copy to: /etc/php/8.2/fpm/conf.d/99-archive-custom.ini
; Copy to: /etc/php/8.2/cli/conf.d/99-archive-custom.ini

[PHP]
; Performance Settings
memory_limit = 256M
max_execution_time = 300
max_input_time = 300
max_input_vars = 3000

; Upload Settings
upload_max_filesize = 64M
post_max_size = 64M
file_uploads = On

; Error Handling (Production)
display_errors = Off
display_startup_errors = Off
log_errors = On
error_log = /var/log/php/error.log
error_reporting = E_ALL & ~E_DEPRECATED & ~E_STRICT

; Security
expose_php = Off
allow_url_fopen = On
allow_url_include = Off

; Session Configuration
session.cookie_httponly = 1
session.cookie_secure = 1
session.use_strict_mode = 1
session.cookie_samesite = Lax
session.gc_maxlifetime = 1440
session.gc_probability = 1
session.gc_divisor = 100

; Date/Time
date.timezone = Asia/Kolkata

; Character Encoding
default_charset = UTF-8

; Output Buffering
output_buffering = 4096

; Resource Limits
max_input_nesting_level = 64

[opcache]
; OPcache Settings
opcache.enable = 1
opcache.enable_cli = 0
opcache.memory_consumption = 128
opcache.interned_strings_buffer = 8
opcache.max_accelerated_files = 10000
opcache.max_wasted_percentage = 5
opcache.use_cwd = 1
opcache.validate_timestamps = 1
opcache.revalidate_freq = 60
opcache.save_comments = 1
opcache.fast_shutdown = 1

; OPcache JIT (PHP 8.0+)
opcache.jit = 1255
opcache.jit_buffer_size = 64M

[mysqli]
; MySQLi Settings
mysqli.default_socket = /var/run/mysqld/mysqld.sock
mysqli.allow_local_infile = Off
mysqli.max_persistent = -1
mysqli.max_links = -1

[mysqlnd]
; MySQL Native Driver
mysqlnd.collect_statistics = On
mysqlnd.collect_memory_statistics = Off

[Session]
; Session Handler (uncomment if using Redis)
; session.save_handler = redis
; session.save_path = "tcp://127.0.0.1:6379?database=0"

[Date]
date.timezone = Asia/Kolkata

[curl]
; cURL settings
curl.cainfo = /etc/ssl/certs/ca-certificates.crt
